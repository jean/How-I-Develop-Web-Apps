# Sets up an apache instance to serve the documentation,
# generated by Sphinx
#
# TODO: is there a pure-python static http server I could use instead of compiling
#       httpd?

[buildout]
include-site-packages = false
exec-sitecustomize = false

parts = 
    sphinx
    nosier
    
[sphinx]
recipe = zc.recipe.egg
dependent-scripts = true
eggs =
    Sphinx
    cloud_sptheme
    sphinxjp.themes.htmlslide

[generate-docs]
recipe = cp.recipe.cmd
install_cmd = 
    BUILDDIR="${buildout:directory}/www"
    SPHINXBUILD="${buildout:directory}/bin/sphinx-build"
    SOURCEDIR="${buildout:directory}/src/jjmojojjmojo.addressbook/docs"
    echo "Generating html documentation..."
    make -f $SOURCEDIR/Makefile html "BUILDDIR=$BUILDDIR" "SPHINXBUILD=$SPHINXBUILD" "SOURCEDIR=$SOURCEDIR"
    echo
update_cmd = ${:install_cmd}

[nosier]
recipe = zc.recipe.egg
dependent-scripts = true
eggs = 
    nosier
